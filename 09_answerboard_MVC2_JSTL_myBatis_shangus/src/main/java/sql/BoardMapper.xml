<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hk.board.dao">
	<select id="boardlist" resultType="AnsDto">
	SELECT SEQ,ID,TITLE,CONTENT,REGDATE,
    	   REFER, STEP, DEPTH, READCOUNT, DELFLAG 
	FROM ANSWERBOARD
	ORDER BY REFER DESC, STEP ASC
	</select>
	
	
	<insert id="insertboard" parameterType="AnsDto" >
	INSERT INTO ANSWERBOARD
VALUES(NULL, #{id}, #{title}, #{content}, SYSDATE(),
		(SELECT NVL(max(refer),0)+1 FROM ANSWERBOARD),
		0,0,0,'N')
	</insert>
	
	<select id="getboard" parameterType="Integer" resultType="AnsDto">
		SELECT SEQ, ID, TITLE, CONTENT, REGDATE
		FROM ANSWERBOARD
		WHERE SEQ=#{seq}
	</select>
	
	<update id="readcount" parameterType="Integer">
		UPDATE ANSWERBOARD SET READCOUNT = READCOUNT+1
		WHERE SEQ =#{seq}
	</update>
</mapper>